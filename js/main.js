$(function(){const a=void 0!==GLOBAL_CONFIG.Snackbar,o=0<$("#sidebar .sidebar-toc__content").children().length,s=void 0!==$("#search_button").outerWidth()?$("#search_button").outerWidth():0,i=$("#blog_name").width();for(var n=0,e=0;e<$("#page-header .menus_item").length;e++)n+=$("#page-header .menus_item").eq(e).outerWidth();function t(e){var t;1===e?t=i+s+n>$("#page-header").width()-300:2===e&&(t=i+s+n>$("#page-header").width()),t?r():($("#page-header .toggle-menu").removeClass("is_visible"),$("#page-header .menus,.search span").removeClass("is_invisible"))}function r(){$("#page-header .toggle-menu").addClass("is_visible"),$("#page-header .menus,.search span").addClass("is_invisible")}function c(){$("#page-header").addClass("open-sidebar"),$("body").animate({paddingLeft:300},400),$("#sidebar").css("transform","translateX(300px)"),$("#toggle-sidebar").css({transform:"rotateZ(180deg)",color:"#99a9bf",opacity:"1"})}t(2),$("#page-header").css({opacity:"1",animation:"headerNoOpacity 1s"}),$(window).bind("resize",function(){768<window.innerWidth?t(2):r()}),GLOBAL_CONFIG.isHome&&(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)||$(".full_page").css("background-attachment","fixed")),GLOBAL_CONFIG.isPost&&($("#sidebar").hasClass("auto_open")&&o&&($("#toggle-sidebar").addClass("on"),setTimeout(function(){$("#toggle-sidebar").addClass("on"),c()},400),t(1)),o?$("#toggle-sidebar").css("opacity","1"):$("#sidebar,#toggle-sidebar").css("display","none"),0===$("#mobile-sidebar-toc .sidebar-toc__content").children().length&&$("#mobile-sidebar-toc,#mobile-toc-button").css("display","none")),$("#toggle-sidebar").on("click",function(){var e;!isMobile()&&$("#sidebar").is(":visible")&&((e=$(this).hasClass("on"))?$(this).removeClass("on"):$(this).addClass("on"),e?($("#page-header").removeClass("open-sidebar"),$("body").animate({paddingLeft:0},400),$("#sidebar").css("transform","translateX(0px)"),$("#toggle-sidebar").css({transform:"rotateZ(0deg)",color:"#1F2D3D",opacity:"1"}),setTimeout(function(){t(2)},500)):(t(1),c()))}),$(".scroll-down").on("click",function(){scrollTo("#content-outer")}),$("#bookmark-it").on("click",function(){if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(document.title,window.location.href,"");else if(window.external&&"AddFavorite"in window.external)window.external.AddFavorite(location.href,document.title);else{if(window.opera&&window.print)return this.title=document.title,!0;var e;a?(e=GLOBAL_CONFIG.Snackbar.bookmark.message_prev+" "+(-1!==navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL")+"+ D "+GLOBAL_CONFIG.Snackbar.bookmark.message_next+".",snackbarShow(e)):alert(GLOBAL_CONFIG.bookmark.message_prev+" "+(-1!==navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL")+"+ D "+GLOBAL_CONFIG.bookmark.message_next+".")}}),$(document).on("click",".code-area-wrap .fa-clipboard",function(){var e=window.getSelection(),t=document.createRange();t.selectNodeContents($(this).parent().siblings("figure").find(".code pre")[0]),e.removeAllRanges(),e.addRange(t);e.toString();!function(t){if(document.queryCommandSupported&&document.queryCommandSupported("copy"))try{document.execCommand("copy"),a?snackbarShow(GLOBAL_CONFIG.copy.success):$(t).prev(".copy-notice").text(GLOBAL_CONFIG.copy.success).animate({opacity:1,right:30},450,function(){setTimeout(function(){$(t).prev(".copy-notice").animate({opacity:0,right:0},650)},400)})}catch(e){if(!a)return $(t).prev(".copy-notice").text(GLOBAL_CONFIG.copy.error).animate({opacity:1,right:30},650,function(){setTimeout(function(){$(t).prev(".copy-notice").animate({opacity:0,right:0},650)},400)});snackbarShow(GLOBAL_CONFIG.copy.success)}else a?snackbarShow(GLOBAL_CONFIG.copy.noSupport):$(t).prev(".copy-notice").text(GLOBAL_CONFIG.copy.noSupport)}(this),e.removeAllRanges()}),$(document).on("click",".code-area-wrap .code-expand",function(){var e=$(this).parent().next();$(this).hasClass("code-closed")?(e.slideDown(300),$(this).removeClass("code-closed")):(e.slideUp(300),$(this).addClass("code-closed"))});var l=GLOBAL_CONFIG.medium_zoom;if(GLOBAL_CONFIG.fancybox)$().fancybox({selector:"[data-fancybox]",loop:!0,transitionEffect:"slide",protect:!0,buttons:["slideShow","fullScreen","thumbs","close"]});else if(l){const w=mediumZoom(document.querySelectorAll(":not(a)>img"));w.on("open",e=>{var t="dark"===$(document.documentElement).attr("data-theme")?"#121212":"#fff";w.update({background:t})})}function d(e){$("body").css("overflow","hidden"),$("#body-wrap").css("transform","translateX(-250px)"),$("#page-header").css("transform","translateX(-250px)"),$("#page-header.fixed.visible").css("transform","translate3d(-250px, 100%, 0)"),$("#rightside").css("transform","translateX(-288px)"),$("#menu_mask").fadeIn(),"menu"===e&&($(".toggle-menu").removeClass("close").addClass("open"),$("#mobile-sidebar-menus").css({transform:"translateX(-254px)"})),"toc"===e&&($("#mobile-toc-button").removeClass("close").addClass("open"),$("#mobile-sidebar-toc").css("transform","translateX(-254px)"))}function u(e){$("body").css("overflow",""),$("#body-wrap").css("transform",""),$("#page-header").css("transform",""),$("#page-header.fixed.visible").css("transform",""),$("#rightside").css("transform","translateX(-38px)"),$("#menu_mask").fadeOut(),"menu"===e&&($(".toggle-menu").removeClass("open").addClass("close"),$("#mobile-sidebar-menus").css({transform:"translateX(0)"})),"toc"===e&&($("#mobile-toc-button").removeClass("open").addClass("close"),$("#mobile-sidebar-toc").css("transform",""))}$(".toggle-menu").on("click",function(){$(".toggle-menu").hasClass("close")&&(d("menu"),$("#toggle-sidebar").hasClass("on")&&($("body").css("padding-left","0"),$("#sidebar").css("transform","")))}),$("#mobile-toc-button").on("click",function(){$("#mobile-toc-button").hasClass("close")&&d("toc")}),$("#menu_mask").on("click touchstart",function(e){$(".toggle-menu").hasClass("open")&&(u("menu"),$("#toggle-sidebar").hasClass("on")&&setTimeout(function(){c()},600)),$("#mobile-toc-button").hasClass("open")&&u("toc")}),$(window).on("resize",function(e){$(".toggle-menu").is(":visible")||$(".toggle-menu").hasClass("open")&&u("menu"),$("#mobile-toc-button").is(":visible")||$("#mobile-toc-button").hasClass("open")&&u("toc")}),$("#mobile-sidebar-toc a").on("click",function(){u("toc")});var h=0;function m(e){var t=parseFloat($("body").css("font-size")),a=parseFloat($("pre").css("font-size")),s=parseFloat($("code").css("font-size"));"plus"===e?($("body").css("font-size",t+1),$("pre").css("font-size",a+1),$("code").css("font-size",s+1)):($("body").css("font-size",t-1),$("pre").css("font-size",a-1),$("code").css("font-size",s-1))}$(".toc-child").hide(),$(window).scroll(throttle(function(e){var t,a,s=$(this).scrollTop();!isMobile()&&o&&(t=s,a=$("#content-outer").height(),i=(i=$(window).height())<a?a-i:$(document).height()-i,i=t/i,i=100<(i=Math.round(100*i))?100:i,$(".progress-num").text(i),$(".sidebar-toc__progress-bar").animate({width:i+"%"},100),function(t){if(0===$(".toc-link").length)return;var e=$("#post-content").find("h1,h2,h3,h4,h5,h6"),a="";e.each(function(){var e=$(this);t>e.offset().top-25&&(a="#"+$(this).attr("id"))}),""===a&&($(".toc-link").removeClass("active"),$(".toc-child").hide());var s=$(".toc-link.active");a&&s.attr("href")!==a&&(function(e){window.history.replaceState&&e!==window.location.hash&&window.history.replaceState(void 0,void 0,e)}(a),$(".toc-link").removeClass("active"),(e=$('.toc-link[href="'+a+'"]')).addClass("active"),s=e.parents(".toc-child"),function(e){e.is(":visible")||e.fadeIn(400)}((e=0<s.length?s.last():e).closest(".toc-item").find(".toc-child")),e.closest(".toc-item").siblings(".toc-item").find(".toc-child").hide())}(s),function(e){{var t,a;$(".toc-link").hasClass("active")&&(t=$(".active").offset().top,a=$("#sidebar").scrollTop(),t>e+$(window).height()-50?$("#sidebar").scrollTop(a+100):t<e+50&&$("#sidebar").scrollTop(a-100))}}(s));var i;i=h<s;56<(h=s)?(i?$("#page-header").hasClass("visible")&&$("#page-header").removeClass("visible"):$("#page-header").hasClass("visible")||$("#page-header").addClass("visible"),$("#page-header").addClass("fixed"),"0"===$("#rightside").css("opacity")&&$("#rightside").animate({},function(){$(this).css({opacity:"1",transform:"translateX(-38px)"})})):(0===s&&$("#page-header").removeClass("fixed").removeClass("visible"),$("#rightside").animate({},function(){$("#rightside").css({opacity:"",transform:""})}))},300)),$("#go-up").on("click",function(){scrollTo("body")}),$(".toc-link").on("click",function(e){e.preventDefault(),e=$(this).attr("href"),scrollTo(e)}),$("#readmode").click(function(){var e="dark"===$(document.documentElement).attr("data-theme"),t=""===$(document.documentElement).attr("data-theme");$("body").toggleClass("read-mode"),$("#to_comment").toggleClass("is_invisible"),t&&$(document.documentElement).attr("data-theme","dark"),e&&$(document.documentElement).attr("data-theme","")}),$("#font_plus").click(function(){m("plus")}),$("#font_minus").click(function(){m("minus")}),$(".menus-expand").on("click",function(){$(this).hasClass("menus-closed")?($(this).parents(".menus_item").find(".menus_item_child").slideDown(),$(this).removeClass("menus-closed")):($(this).parents(".menus_item").find(".menus_item_child").slideUp(),$(this).addClass("menus-closed"))}),$("#rightside_config").on("click",function(){$("#rightside-config-hide").hasClass("rightside-in")?$("#rightside-config-hide").removeClass("rightside-in").addClass("rightside-out"):$("#rightside-config-hide").removeClass("rightside-out").addClass("rightside-in")});var g,p,f=GLOBAL_CONFIG.copyright;function b(){$("#darkmode").removeClass("fa-moon-o").addClass("fa-sun-o")}function v(){$("#darkmode").removeClass("fa-sun-o").addClass("fa-moon-o")}if(void 0!==f&&(document.body.oncopy=e=>{e.preventDefault();let t;var a=window.getSelection(0).toString();return t=45<a.length?a+"\n\n\n"+f.languages.author+"\n"+f.languages.link+"\n"+f.languages.source+"\n"+f.languages.info:a,(e.clipboardData?e:window).clipboardData.setData("text",t)}),$(".justified-gallery").length&&($(".justified-gallery > p > .fancybox").unwrap(),$("head").append('<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">'),loadScript("https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js",function(){"function"==typeof $.fn.justifiedGallery&&$(".justified-gallery").justifiedGallery({rowHeight:220,margins:4})})),"undefined"!=typeof autoChangeMode&&("1"!==autoChangeMode&&"2"!==autoChangeMode||("dark"===Cookies.get("theme")?b:v)()),$("#darkmode").click(function(){"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(b(),activateDarkMode(),Cookies.set("theme","dark",{expires:2}),a&&snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(v(),activateLightMode(),Cookies.set("theme","light",{expires:2}),a&&snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day))}),GLOBAL_CONFIG.runtime&&(g=$("#webinfo-runtime-count").attr("start_date"),(l=function(){var e=new Date(g),e=(new Date).getTime()-e.getTime(),e=Math.floor(e/864e5);$(".webinfo-runtime-count").text(e+" "+GLOBAL_CONFIG.runtime_unit)})(),clearInterval(C),C=setInterval(l,1e4)),void 0===GLOBAL_CONFIG.localSearch&&void 0!==GLOBAL_CONFIG.algolia){$("a.social-icon.search").on("click",function(){y(),$(".ais-search-box--input").focus()}),$(".search-mask, .search-close-button").on("click",_);var C=GLOBAL_CONFIG.algolia;if(!(C.appId&&C.apiKey&&C.indexName))return console.error("Algolia setting is invalid!");C=instantsearch({appId:C.appId,apiKey:C.apiKey,indexName:C.indexName,searchParameters:{hitsPerPage:C.hits.per_page||10},searchFunction:function(e){$("#algolia-search-input").find("input").val()&&e.search()}});C.addWidget(instantsearch.widgets.searchBox({container:"#algolia-search-input",reset:!1,magnifier:!1,placeholder:GLOBAL_CONFIG.algolia.languages.input_placeholder})),C.addWidget(instantsearch.widgets.hits({container:"#algolia-hits",templates:{item:function(e){return'<a href="'+(e.permalink||GLOBAL_CONFIG.root+e.path)+'" class="algolia-hit-item-link">'+e._highlightResult.title.value+"</a>"},empty:function(e){return'<div id="algolia-hits-empty">'+GLOBAL_CONFIG.algolia.languages.hits_empty.replace(/\$\{query}/,e.query)+"</div>"}},cssClasses:{item:"algolia-hit-item"}})),C.addWidget(instantsearch.widgets.stats({container:"#algolia-stats",templates:{body:function(e){return"<hr>"+GLOBAL_CONFIG.algolia.languages.hits_stats.replace(/\$\{hits}/,e.nbHits).replace(/\$\{time}/,e.processingTimeMS)+'<span class="algolia-logo pull_right">  <img src="'+GLOBAL_CONFIG.root+'img/algolia.svg" alt="Algolia" /></span>'}}})),C.addWidget(instantsearch.widgets.pagination({container:"#algolia-pagination",scrollTo:!1,showFirstLast:!1,labels:{first:'<i class="fa fa-angle-double-left"></i>',last:'<i class="fa fa-angle-double-right"></i>',previous:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>'},cssClasses:{root:"pagination",item:"pagination-item",link:"page-number",active:"current",disabled:"disabled-item"}})),C.start()}function y(){$("body").css("width","100%"),$("body").css("overflow","hidden"),$(".search-dialog").css({display:"block"}),$(".search-mask").fadeIn(),document.addEventListener("keydown",function e(t){"Escape"===t.code&&(_(),document.removeEventListener("keydown",e))})}function _(){$("body").css("width",""),$("body").css("overflow",""),$(".search-dialog").css({animation:"search_close .5s"}),$(".search-dialog").animate({},function(){setTimeout(function(){$(".search-dialog").css({animation:"",display:"none"})},500)}),$(".search-mask").fadeOut()}void 0!==GLOBAL_CONFIG.localSearch&&void 0===GLOBAL_CONFIG.algolia&&($("a.social-icon.search").on("click",function(){y(),$("#local-search-input input").focus(),p(GLOBAL_CONFIG.localSearch.path)}),$(".search-mask, .search-close-button").on("click",_),p=function(e){$.ajax({url:GLOBAL_CONFIG.root+e,dataType:"xml",success:function(e){var a=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),e=$("#local-search-input input")[0],s=$("#local-hits")[0];e.addEventListener("input",function(){var t,r='<div class="search-result-list">',c=this.value.trim().toLowerCase().split(/[\s]+/);s.innerHTML="",this.value.trim().length<=0?$(".local-search-stats__hr").hide():(t=0,a.forEach(function(e){var a,s=!0,i=e.title.trim().toLowerCase(),o=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),e=e.url,n=-1;""!==i&&""!==o&&c.forEach(function(e,t){a=i.indexOf(e),n=o.indexOf(e),a<0&&n<0?s=!1:n<0&&(n=0)}),s&&(r+='<div class="local-search__hit-item"><a href="'+e+'" class="search-result-title">'+i+"</a></div>",t+=1,$(".local-search-stats__hr").show())}),0===t&&(r+='<div id="local-search__hits-empty">'+GLOBAL_CONFIG.localSearch.languages.hits_empty.replace(/\$\{query}/,this.value.trim())+"</div>"),s.innerHTML=r)})}})}),GLOBAL_CONFIG.baiduPush&&function(){var e=document.createElement("script"),t=window.location.protocol.split(":")[0];e.src="https"===t?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()});