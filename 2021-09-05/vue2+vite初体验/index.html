<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><title>vue2+viteåˆä½“éªŒ | ç£¨è¹­å…ˆç”Ÿ</title><meta name="description" content="è‡ªä» vite å‘å¸ƒä¹‹åï¼Œç¤¾åŒºèµèª‰æ— æ•°ï¼Œè€Œæˆ‘ä¹Ÿä¸€ç›´å¿ƒæ°´ vite çš„è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½çš„ç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯å…¬å¸çš„é¡¹ç›®å·¨å¤§ï¼Œå·²ç»ä¸¥é‡æ‹–æ…¢äº†çƒ­é‡è½½çš„é€Ÿåº¦äº†ï¼Œæ¯æ¬¡çƒ­é‡è½½éƒ½è¦ç­‰ä¸Šä¸€å°ä¼šï¼Œæ‰€ä»¥æ€¥éœ€å¯»æ‰¾ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚"><meta name="keywords" content="vite"><meta name="author" content="gating"><meta name="copyright" content="gating"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/GATING/blog_imgs@master/blog/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://hm.baidu.com"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="vue2+viteåˆä½“éªŒ"><meta name="twitter:description" content="è‡ªä» vite å‘å¸ƒä¹‹åï¼Œç¤¾åŒºèµèª‰æ— æ•°ï¼Œè€Œæˆ‘ä¹Ÿä¸€ç›´å¿ƒæ°´ vite çš„è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½çš„ç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯å…¬å¸çš„é¡¹ç›®å·¨å¤§ï¼Œå·²ç»ä¸¥é‡æ‹–æ…¢äº†çƒ­é‡è½½çš„é€Ÿåº¦äº†ï¼Œæ¯æ¬¡çƒ­é‡è½½éƒ½è¦ç­‰ä¸Šä¸€å°ä¼šï¼Œæ‰€ä»¥æ€¥éœ€å¯»æ‰¾ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta property="og:type" content="article"><meta property="og:title" content="vue2+viteåˆä½“éªŒ"><meta property="og:url" content="https://gatings.cn/2021-09-05/vue2+vite%E5%88%9D%E4%BD%93%E9%AA%8C/"><meta property="og:site_name" content="ç£¨è¹­å…ˆç”Ÿ"><meta property="og:description" content="è‡ªä» vite å‘å¸ƒä¹‹åï¼Œç¤¾åŒºèµèª‰æ— æ•°ï¼Œè€Œæˆ‘ä¹Ÿä¸€ç›´å¿ƒæ°´ vite çš„è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½çš„ç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯å…¬å¸çš„é¡¹ç›®å·¨å¤§ï¼Œå·²ç»ä¸¥é‡æ‹–æ…¢äº†çƒ­é‡è½½çš„é€Ÿåº¦äº†ï¼Œæ¯æ¬¡çƒ­é‡è½½éƒ½è¦ç­‰ä¸Šä¸€å°ä¼šï¼Œæ‰€ä»¥æ€¥éœ€å¯»æ‰¾ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode="1";var t=Cookies.get("theme");{const e=window.matchMedia("(prefers-color-scheme: dark)").matches,o=window.matchMedia("(prefers-color-scheme: light)").matches,a=window.matchMedia("(prefers-color-scheme: no-preference)").matches,c=!e&&!o&&!a;void 0===t?o?activateLightMode():e?activateDarkMode():(a||c)&&(console.log("You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time."),now=new Date,hour=now.getHours(),isNight=hour<6||hour>=18,isNight?activateDarkMode():activateLightMode()):"light"==t?activateLightMode():activateDarkMode()}function activateDarkMode(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#000")}function activateLightMode(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#fff")}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://gatings.cn/2021-09-05/vue2+vite%E5%88%9D%E4%BD%93%E9%AA%8C/"><link rel="next" title="Vue+Antdæ­é…ç™¾åº¦åœ°å›¾å®ç°æœç´¢å®šä½ç­‰åŠŸèƒ½" href="https://gatings.cn/2020-11-03/Vue+Antd%E6%90%AD%E9%85%8D%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E5%AE%9E%E7%8E%B0%E6%90%9C%E7%B4%A2%E5%AE%9A%E4%BD%8D%E7%AD%89%E5%8A%9F%E8%83%BD/"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?914d8fcbdf614fcc92017b47706d7bee";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},translate:{defaultEncoding:2,translateDelay:0,cookieDomain:"https://gatings.cn/",msgToTraditionalChinese:"ç¹",msgToSimplifiedChinese:"ç®€"},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},bookmark:{title:"Snackbar.bookmark.title",message_prev:"æŒ‰",message_next:"é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾"},runtime_unit:"å¤©",runtime:!0,copyright:void 0,ClickShowText:void 0,medium_zoom:!0,fancybox:!0,Snackbar:{bookmark:{title:"Snackbar.bookmark.title",message_prev:"æŒ‰",message_next:"é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾"},chs_to_cht:"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“",cht_to_chs:"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“",day_to_night:"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼",night_to_day:"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼",bgLight:"#49b1f5",bgDark:"#2d3035",position:"bottom-left"},baiduPush:!0,isHome:!1,isPost:!0}</script><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="ç£¨è¹­å…ˆç”Ÿ" type="application/atom+xml">
</head><body><header><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">ç£¨è¹­å…ˆç”Ÿ</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/GATING/blog_imgs@master/blog/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">39</div></a></div></div><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">19</div></a></div></div><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">8</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">ç›®å½•</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#å‰è¨€"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">å‰è¨€</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#åˆæ­¥ä½“éªŒ"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">åˆæ­¥ä½“éªŒ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Node10-å°è¯•ï¼ˆå¯é€‰ï¼‰"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">Node10 å°è¯•ï¼ˆå¯é€‰ï¼‰</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#å¼€å§‹æ­å»º"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">å¼€å§‹æ­å»º</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#å®‰è£…-vue-cli-plugin-vite"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">å®‰è£… vue-cli-plugin-vite</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#å¿½ç•¥-vue-æ‹“å±•å"><span class="toc_mobile_items-number">4.1.1.</span> <span class="toc_mobile_items-text">å¿½ç•¥ .vue æ‹“å±•å</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#JSX-è¯­æ³•å¤„ç†"><span class="toc_mobile_items-number">4.1.2.</span> <span class="toc_mobile_items-text">JSX è¯­æ³•å¤„ç†</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#require-è¯­æ³•å¤„ç†"><span class="toc_mobile_items-number">4.1.3.</span> <span class="toc_mobile_items-text">require è¯­æ³•å¤„ç†</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#scss-å˜é‡æ³¨å…¥"><span class="toc_mobile_items-number">4.1.4.</span> <span class="toc_mobile_items-text">scss å˜é‡æ³¨å…¥</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#script-æŒ‡å®šç¯å¢ƒ"><span class="toc_mobile_items-number">4.1.5.</span> <span class="toc_mobile_items-text">script æŒ‡å®šç¯å¢ƒ</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#é¢å¤–çŸ¥è¯†ç‚¹-keep-alive-ä½¿ç”¨åŠ¨æ€-key-æ—¶ï¼Œçƒ­æ›´æ–°æ— æ•ˆ"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">é¢å¤–çŸ¥è¯†ç‚¹ - keep-alive ä½¿ç”¨åŠ¨æ€ key æ—¶ï¼Œçƒ­æ›´æ–°æ— æ•ˆ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#æœªè§£å†³çš„é—®é¢˜"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">æœªè§£å†³çš„é—®é¢˜</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#æ€»ç»“"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">æ€»ç»“</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#æœ€å"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text">æœ€å</span></a></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#å‰è¨€"><span class="toc-number">1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#åˆæ­¥ä½“éªŒ"><span class="toc-number">2.</span> <span class="toc-text">åˆæ­¥ä½“éªŒ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Node10-å°è¯•ï¼ˆå¯é€‰ï¼‰"><span class="toc-number">3.</span> <span class="toc-text">Node10 å°è¯•ï¼ˆå¯é€‰ï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å¼€å§‹æ­å»º"><span class="toc-number">4.</span> <span class="toc-text">å¼€å§‹æ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#å®‰è£…-vue-cli-plugin-vite"><span class="toc-number">4.1.</span> <span class="toc-text">å®‰è£… vue-cli-plugin-vite</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å¿½ç•¥-vue-æ‹“å±•å"><span class="toc-number">4.1.1.</span> <span class="toc-text">å¿½ç•¥ .vue æ‹“å±•å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSX-è¯­æ³•å¤„ç†"><span class="toc-number">4.1.2.</span> <span class="toc-text">JSX è¯­æ³•å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#require-è¯­æ³•å¤„ç†"><span class="toc-number">4.1.3.</span> <span class="toc-text">require è¯­æ³•å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scss-å˜é‡æ³¨å…¥"><span class="toc-number">4.1.4.</span> <span class="toc-text">scss å˜é‡æ³¨å…¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#script-æŒ‡å®šç¯å¢ƒ"><span class="toc-number">4.1.5.</span> <span class="toc-text">script æŒ‡å®šç¯å¢ƒ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#é¢å¤–çŸ¥è¯†ç‚¹-keep-alive-ä½¿ç”¨åŠ¨æ€-key-æ—¶ï¼Œçƒ­æ›´æ–°æ— æ•ˆ"><span class="toc-number">5.</span> <span class="toc-text">é¢å¤–çŸ¥è¯†ç‚¹ - keep-alive ä½¿ç”¨åŠ¨æ€ key æ—¶ï¼Œçƒ­æ›´æ–°æ— æ•ˆ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æœªè§£å†³çš„é—®é¢˜"><span class="toc-number">6.</span> <span class="toc-text">æœªè§£å†³çš„é—®é¢˜</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">7.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æœ€å"><span class="toc-number">8.</span> <span class="toc-text">æœ€å</span></a></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image:url(https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png)"><div id="post-info"><div id="post-title"><div class="posttitle">vue2+viteåˆä½“éªŒ</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> å‘è¡¨äº 2021-09-05<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> æ›´æ–°äº 2021-10-13</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%B0%8F%E5%B7%A5%E5%85%B7/">å°å·¥å…·</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>å­—æ•°æ€»è®¡:</span><span class="word-count">3.9k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>é˜…è¯»æ—¶é•¿: 16 åˆ†é’Ÿ</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è‡ªä» <a href="https://cn.vitejs.dev/" target="_blank" rel="noopener">vite</a> å‘å¸ƒä¹‹åï¼Œç¤¾åŒºèµèª‰æ— æ•°ï¼Œè€Œæˆ‘ä¹Ÿä¸€ç›´å¿ƒæ°´ <a href="https://cn.vitejs.dev/" target="_blank" rel="noopener">vite</a> çš„è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½çš„ç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯å…¬å¸çš„é¡¹ç›®å·¨å¤§ï¼Œå·²ç»ä¸¥é‡æ‹–æ…¢äº†çƒ­é‡è½½çš„é€Ÿåº¦äº†ï¼Œæ¯æ¬¡çƒ­é‡è½½éƒ½è¦ç­‰ä¸Šä¸€å°ä¼šï¼Œæ‰€ä»¥æ€¥éœ€å¯»æ‰¾ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚ä¹Ÿå‘ç°è‡ªå·±å¾ˆä¹…æ²¡æ›´æ–°åšå®¢äº†ï¼Œé¡ºæ‰‹æ›´æ–°ä¸€ç¯‡ä¸‹ ğŸ˜¢</p><p>è™½ç„¶ï¼Œæˆ‘ä»¬é€šè¿‡ <a href="https://www.webpackjs.com/" target="_blank" rel="noopener">webpack</a> é…ç½®ï¼ŒæŒ‡å®šäº†åœ¨æœ¬åœ°åŠ è½½çš„è·¯ç”±ï¼Œä½¿å¾—çƒ­æ›´æ–°æ›´åŠ è¿…é€Ÿä¸€äº›ï¼Œä½†æ˜¯ä»ç„¶æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚æ‰€ä»¥å°±æƒ³ç€ä½¿ç”¨ <a href="https://cn.vitejs.dev/" target="_blank" rel="noopener">vite</a> è¿›è¡Œå°è¯•äº†ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">dir</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> path.join(__dirname, dir);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> isLocal = process.env.LOCAL === <span class="string">"true"</span>;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  chainWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isLocal &amp;&amp; fs.existsSync(resolve(<span class="string">"/src/mainDev.js"</span>))) &#123;</span><br><span class="line">      config.entry(<span class="string">"app"</span>).clear().add(<span class="string">"./src/mainDev.js"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: æˆ‘çš„ç†æƒ³çš„æ–¹æ¡ˆæ˜¯ï¼š<code>webpack</code> ä»ç„¶ä½œä¸ºæ‰“åŒ…å·¥å…·ï¼Œ<code>vite</code> ä½œä¸ºå¼€å‘å·¥å…·ã€‚å› ä¸ºæˆ‘ä»ç„¶è§‰å¾— <code>webpack</code> è¿˜æ˜¯å½“ä¸‹æ„å»º <code>webapp</code> çš„æœ€ä½³å®è·µ(å¸¦æœ‰ä»£ç æ‹†åˆ†ï¼Œæ—§æµè§ˆå™¨çš„ Legecy-build)ã€‚æ‰€ä»¥ï¼Œæˆ‘ä¼šå°½é‡åœ¨ <code>vite</code> å’Œ <code>webpack</code> ç¯å¢ƒä¸‹ç»´æŠ¤ä¸€ä»½é…ç½®ã€‚</p></blockquote><blockquote><p>ps: ä¸ºäº†æ›´åŠ æ— ç¼çš„è¿ç§» Viteï¼Œè¿™é‡Œä½¿ç”¨äº† vue-cli æ’ä»¶ï¼Œå³ vue-cli-plugin-vite</p></blockquote><p>æœ¬æ¬¡æ•™ç¨‹å¯èƒ½è¿‡äºå•°å—¦ï¼Œå¯ä»¥å…ˆåˆ°<a href="https://gitee.com/gating/demo/tree/master/vite" target="_blank" rel="noopener">gitee</a>ã€<a href="https://github.com/GATING/demo/tree/master/vite" target="_blank" rel="noopener">github</a>ä¸‹è½½ä½“éªŒï¼Œä¹Ÿå¯åˆ°æ–‡æœ«ç›´æ¥ä¸‹è½½ä»£ç å…ˆè‡ªè¡Œä½“éªŒã€‚ã€‚ã€‚</p><blockquote><p>ç‰¹åˆ«è¯´æ˜ï¼šé¡¹ç›®ä½¿ç”¨çš„ Node ç‰ˆæœ¬ä¸º 14.17.6ï¼ŒNode10 é¡¹ç›®çš„ç‰ˆæœ¬ä¸º 10.15.3ï¼Œçš†ä¸º Node ç¨³å®šç‰ˆæœ¬</p></blockquote><h1 id="åˆæ­¥ä½“éªŒ"><a href="#åˆæ­¥ä½“éªŒ" class="headerlink" title="åˆæ­¥ä½“éªŒ"></a>åˆæ­¥ä½“éªŒ</h1><p>æœ‰äº†è¿™ä¸ªæƒ³æ³•ï¼Œå½“ç„¶å°±æ‰“å¼€å®˜ç½‘ç›´æ¥å¼€å¹²å‘€ï¼Œæ‰“å¼€<a href="https://cn.vitejs.dev/guide/#scaffolding-your-first-vite-project" target="_blank" rel="noopener">æ­å»ºç¬¬ä¸€ä¸ª Vite é¡¹ç›®</a>ï¼Œå‘ç° Vite éœ€è¦ <a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js</a> ç‰ˆæœ¬ &gt;= 12.0.0ï¼Œè€Œæˆ‘å…¬å¸ç”¨çš„æ˜¯ <code>Node10</code> ç¨³å®šç‰ˆã€‚</p><p>å“¦è± ğŸ˜¢ï¼ï¼çœ‹åˆ°è¿™é‡Œï¼Œæœ¬ä»¥ä¸ºæœ¬æ¬¡è¿ç§»å°±åˆ°æ­¤ç»“æŸäº†~~ã€‚</p><h1 id="Node10-å°è¯•ï¼ˆå¯é€‰ï¼‰"><a href="#Node10-å°è¯•ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="Node10 å°è¯•ï¼ˆå¯é€‰ï¼‰"></a>Node10 å°è¯•ï¼ˆå¯é€‰ï¼‰</h1><p>å½“ç„¶ï¼Œæˆ‘æŠ±ç€å°ç€ä¸€è¯•çš„å¿ƒæ€ï¼Œåœ¨ Node10 ä¸­è¿è¡Œ Viteï¼Œç„¶åå‡ºç°æŠ¥é”™äº†ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><p><font color="red">Error: Cannot find module â€˜worker_threadsâ€™</font></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon01.jpg" target="_blank" rel="noopener" data-fancybox="group" data-caption="vue2-vite-demo-icon01.jpg" class="fancybox"><img alt="vue2-vite-demo-icon01.jpg" title="vue2-vite-demo-icon01.jpg" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon01.jpg" class="lazyload"></a></p><p>æ‰€ä»¥æˆ‘ <code>google</code> æœç´¢äº†ä¸‹ <a href="https://stackoverflow.com/questions/62280966/cannot-find-module-worker-threads-error-in-production" target="_blank" rel="noopener">ç­”æ¡ˆ</a>ï¼Œå‘ç° Node10.5 å°±æ”¯æŒäº† workersï¼Œä¸è¿‡ Node12 æ˜¯è‡ªåŠ¨å¼€å¯ï¼Œè€Œ Node10 æ˜¯éœ€è¦æ‰‹åŠ¨å¼€å¯ï¼Œæ‰€ä»¥è¿™è¾¹åšäº†å¦‚ä¸‹ä¿®æ”¹(ä¼ªä»£ç ):</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"vite"</span>: <span class="string">"node --experimental-worker ./bin/vite"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ç„¶å- -ï¼ŒVite åº•å±‚å‡ºç°äº†æ–°çš„æŠ¥é”™ï¼Œå› ä¸º Vite çš„ä½¿ç”¨äº†æ•°ç»„çš„ flat æ–¹æ³•ã€‚</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon02.jpg" target="_blank" rel="noopener" data-fancybox="group" data-caption="vue2-vite-demo-icon02.jpg" class="fancybox"><img alt="vue2-vite-demo-icon02.jpg" title="vue2-vite-demo-icon02.jpg" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon02.jpg" class="lazyload"></a></p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ Vite è¿›è¡Œ Babel çš„ç¼–è¯‘ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸‹ @babel/nodeï¼Œ<code>npm i @babel/node -D</code>ï¼Œä¼ªä»£ç :</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"vite"</span>: <span class="string">"babel-node --experimental-worker ./bin/vite"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ç„¶åå°±å¯ä»¥æ„‰å¿«çš„è¿è¡Œå•¦</p><blockquote><p>ps: å› ä¸ºè¿™é‡Œä½¿ç”¨çš„æ˜¯ vue-cli-plugin-viteï¼Œä»–æ˜¯ä½¿ç”¨ cross-spawn æ‰§è¡Œè„šæœ¬çš„ï¼Œæ‰€ä»¥è¿™é‡Œçš„ babel-node â€“experimental-worker åœ¨ scripts æ— æ•ˆï¼Œéœ€è¦åœ¨ ./bin/vite æ–‡ä»¶é‡Œç¼–å†™ï¼Œå…·ä½“å‚è€ƒ<a href="https://gitee.com/gating/demo/tree/master/vite/vue2-vite-demo-node10" target="_blank" rel="noopener">è¿™ä¸ªé“¾æ¥-GITEE</a>ã€<a href="https://github.com/GATING/demo/tree/master/vite/vue2-vite-demo-node10" target="_blank" rel="noopener">è¿™ä¸ªé“¾æ¥-GITHUB</a></p></blockquote><h1 id="å¼€å§‹æ­å»º"><a href="#å¼€å§‹æ­å»º" class="headerlink" title="å¼€å§‹æ­å»º"></a>å¼€å§‹æ­å»º</h1><p>ä¸ºäº†å¤§å®¶å°½å¯èƒ½çš„å°‘æ”¹ <code>webpack</code>ï¼Œæˆ‘çš„æ¡ˆä¾‹ä¸­ä¹Ÿè¦†ç›–äº†ç›¸å¯¹å¤šçš„å¸¸ç”¨é…ç½®ï¼Œæ¯”å¦‚ï¼š</p><ul><li>scss å˜é‡æ³¨å…¥</li><li>ç¯å¢ƒå˜é‡çš„ä½¿ç”¨</li><li>ä½¿ç”¨åˆ«å alias</li><li>é…ç½® resolve externals</li><li>ä½¿ç”¨ jsx</li><li>require è¯­æ³•</li><li>devServer</li><li>require.context è¯­æ³•å…¼å®¹</li></ul><blockquote><p>ps: å…¼å®¹è¿™äº›è™½ç„¶å¤šæ•°éƒ½æ˜¯ vue-cli-plugin-vite åšçš„äº‹ï¼Œä½†æ˜¯å°±æ˜¯æƒ³ç€å¤§å®¶å¯ä»¥æ‹¿æ¥å³ç”¨ ğŸ˜‚ï¼Œæ›´å¤šå…¼å®¹å‚è€ƒ<a href="https://github.com/IndexXuan/vue-cli-plugin-vite" target="_blank" rel="noopener">vue-cli-plugin-vite</a></p></blockquote><p>ä¸ºäº†æ›´å¥½çš„ç¼–å†™ä½“éªŒï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªåŸºç¡€çš„ <code>vue-cli</code> çš„<a href="https://gitee.com/gating/demo/tree/master/vite/vue2-vite-demo-template" target="_blank" rel="noopener">demo</a>ï¼Œå¯ä»¥ download ä¸‹æ¥ä¸€èµ·å°è¯•ç¼–å†™ä¸€ä¸‹ã€‚</p><h2 id="å®‰è£…-vue-cli-plugin-vite"><a href="#å®‰è£…-vue-cli-plugin-vite" class="headerlink" title="å®‰è£… vue-cli-plugin-vite"></a>å®‰è£… vue-cli-plugin-vite</h2><p>åœ¨å½“å‰é¡¹ç›®æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vue add vite</span><br></pre></td></tr></table></figure></div><h3 id="å¿½ç•¥-vue-æ‹“å±•å"><a href="#å¿½ç•¥-vue-æ‹“å±•å" class="headerlink" title="å¿½ç•¥ .vue æ‹“å±•å"></a>å¿½ç•¥ .vue æ‹“å±•å</h3><p>è¿™é‡Œåä½ ä¼šå‘ç°é¡¹ç›®é‡Œå¤šäº† <code>bin/vite</code> æ–‡ä»¶ï¼Œ<code>package.json</code> çš„ <code>scripts</code> ä¹Ÿå¤šå°‘äº†ä¸€ä¸ª <code>vite</code> çš„å‘½ä»¤ï¼Œè¿è¡Œ:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm run vite</span><br></pre></td></tr></table></figure></div><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon03.jpg" target="_blank" rel="noopener" data-fancybox="group" data-caption="vue2-vite-demo-icon03.jpg" class="fancybox"><img alt="vue2-vite-demo-icon03.jpg" title="vue2-vite-demo-icon03.jpg" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon03.jpg" class="lazyload"></a></p><p><code>Unrestricted file system access to &quot;/src/layout&quot;</code>ï¼Œè¿™ä¸ªæŠ¥é”™è¯´æ˜æ‰¾ä¸åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå¯æ˜¯æˆ‘ä»¬çœ‹ï¼Œæˆ‘ä»¬æ˜æ˜æœ‰<code>layout/index.vue</code>ï¼Œä½†æ˜¯å´æŠ¥æ‰¾ä¸åˆ°ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™æ˜¯å› ä¸º Vite çš„ resolve.extensions é»˜è®¤çš„ .vue çš„åç¼€åï¼Œå®˜æ–¹ä¹Ÿä¸æ¨èè‡ªå®šä¹‰å¯¼å…¥ç±»å‹çš„æ‰©å±•å,å› ä¸ºå®ƒä¼šå½±å“ IDE å’Œç±»å‹æ”¯æŒã€‚(<a href="https://cn.vitejs.dev/config/#resolve-extensions" target="_blank" rel="noopener">æŸ¥çœ‹é“¾æ¥</a>)</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¸ºäº†å…¼å®¹ä»¥å‰çš„æ—§é¡¹ç›®ï¼Œè¿˜æ˜¯éœ€è¦é…ç½®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´æ–°ä¸‹æˆ‘ä»¬çš„é…ç½®ï¼Œåœ¨<code>vue.config.js</code>ä¸­è¡¥ä¸Š resolve.extensions çš„é…ç½®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    resolve: &#123;</span><br><span class="line">      extensions: [<span class="string">".mjs"</span>, <span class="string">".js"</span>, <span class="string">".ts"</span>, <span class="string">".jsx"</span>, <span class="string">".tsx"</span>, <span class="string">".json"</span>, <span class="string">".vue"</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: å°æ’æ›²ï¼Œä¹‹å‰æµ‹è¯•çš„æ—¶å€™å‘ç°é…äº† resolve.extensions ä¹Ÿæ²¡æœ‰æ•ˆæœï¼Œç„¶åç¿»é˜… Vite æ–‡æ¡£ï¼Œå‘ç° Vite æ˜¯æ”¯æŒçš„ï¼Œä½†æ˜¯ vue-cli-plugin-vite ä¸æ”¯æŒï¼Œæ‰€ä»¥æˆ‘ç»™ä½œè€…æäº†ä¸ª <a href="https://github.com/IndexXuan/vue-cli-plugin-vite/issues/45" target="_blank" rel="noopener">Issue</a>ï¼Œç°åœ¨ä¹Ÿæ”¯æŒäº†ï¼Œæ„Ÿè°¢ä½œè€…~~</p></blockquote><blockquote><p>ps: ä»¥åä¸€å®šè¦å†™åç¼€å<del>~</del> ç›¸å…³ Issues <a href="https://github.com/vitejs/vite/issues/178#issuecomment-630138450" target="_blank" rel="noopener">178</a>ã€<a href="https://github.com/vitejs/vite/issues/2163" target="_blank" rel="noopener">2163</a>ã€</p></blockquote><h3 id="JSX-è¯­æ³•å¤„ç†"><a href="#JSX-è¯­æ³•å¤„ç†" class="headerlink" title="JSX è¯­æ³•å¤„ç†"></a>JSX è¯­æ³•å¤„ç†</h3><p>æ·»åŠ å®Œåï¼Œå†æ¬¡è¿è¡Œ:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm run vite</span><br></pre></td></tr></table></figure></div><p>å‘ç°åˆæŠ¥äº†å¦‚ä¸‹é”™è¯¯ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon04.jpg" target="_blank" rel="noopener" data-fancybox="group" data-caption="vue2-vite-demo-icon04.jpg" class="fancybox"><img alt="vue2-vite-demo-icon04.jpg" title="vue2-vite-demo-icon04.jpg" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon04.jpg" class="lazyload"></a></p><p>ç¿»è¯‘æ¥è¯´å°±æ˜¯è¯´ä½ åœ¨ .vue æ–‡ä»¶ä¸­ç”¨äº†æ— æ•ˆçš„ js è¯­æ³•(å³ JSX)ï¼Œè¿™é‡Œå°±å°±éœ€è¦æˆ‘ä»¬åœ¨ vue çš„ sfc ç»„ä»¶ä¸­è¿˜å¾—åŠ ä¸Š jsx æ ‡è¯†ï¼Œå³(<code>src/components/HelloWorld.vue</code>)ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"jsx"</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Test <span class="keyword">from</span> <span class="string">"./Test"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">"HelloWorld"</span>,</span></span><br><span class="line">    components: &#123;</span><br><span class="line">      Test,</span><br><span class="line">      TestJsx: &#123;</span><br><span class="line">        render() &#123;</span><br><span class="line"><span class="javascript">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>æˆ‘æ˜¯vueæ–‡ä»¶çš„JSXæ¸²æŸ“çš„<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    props: &#123;</span><br><span class="line"><span class="javascript">      msg: <span class="built_in">String</span>,</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>ä¿®æ”¹å®Œåå†æ¬¡è¿è¡Œï¼Œå‘ç°åˆæŠ¥é”™äº†ï¼Œè€Œä¸”è¿™ä¸ªé”™è¯¯å’Œä¸Šé¢çš„è¿˜å¾ˆç±»ä¼¼ã€‚ä¸è¿‡åªæ˜¯è¯´æˆ‘ä»¬åœ¨ .js æ–‡ä»¶ä¸­ç”¨äº†æ— æ•ˆçš„ js è¯­æ³•(å³ JSX)ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ JSX è¯·ç¡®ä¿å°†æ–‡ä»¶å‘½åä¸º.JSX æˆ–.tsx æ‰©å±•åã€‚</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon05.jpg" target="_blank" rel="noopener" data-fancybox="group" data-caption="vue2-vite-demo-icon05.jpg" class="fancybox"><img alt="vue2-vite-demo-icon05.jpg" title="vue2-vite-demo-icon05.jpg" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon05.jpg" class="lazyload"></a></p><p>js ä¸­ä¸æ”¯æŒ jsx çš„åŸå› ï¼Œå°¤å¤§ä¹Ÿåœ¨ issue æœ‰è¿‡è¯´æ˜ï¼Œå…·ä½“å‚è€ƒ<a href="https://github.com/vitejs/vite/issues/769#issuecomment-780593283" target="_blank" rel="noopener">è¿™ä¸ªé“¾æ¥</a></p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠ .js æ–‡ä»¶çš„åç¼€åä¿®æ”¹ä¸º .jsx å³å¯</p><p>ä¿®æ”¹å®Œåï¼Œå†æ¬¡è¿è¡Œ:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm run vite</span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œä¼šå‘ç°ï¼Œæµè§ˆå™¨æŠ¥ require is not definedï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆæŠŠ Home.vue æ–‡ä»¶çš„ require æ³¨é‡Šæ‰å…ˆ(require çš„é—®é¢˜ä¸‹é¢ä¼šè®²åˆ°)ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// @ is an alias to /src</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">"@comp/HelloWorld"</span>;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// const &#123; sum &#125; = require('../utils/index')</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">"Home"</span>,</span></span><br><span class="line">    components: &#123;</span><br><span class="line">      HelloWorld,</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      handleClick() &#123;</span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(sum(1, 32))</span></span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>å‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon06.jpg" target="_blank" rel="noopener" data-fancybox="group" data-caption="vue2-vite-demo-icon06.jpg" class="fancybox"><img alt="vue2-vite-demo-icon06.jpg" title="vue2-vite-demo-icon06.jpg" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon06.jpg" class="lazyload"></a></p><p>å› ä¸ºæˆ‘ä»¬è™½ç„¶è®¾ç½®äº†ä¸€å †ä½¿ç”¨ jsx çš„é…ç½®ï¼Œä½†æ˜¯æ²¡æœ‰åœ¨æ’ä»¶ä¸Šé…ç½®å¼€å¯ jsx(å³ä¸è®¾ç½® vitePluginVue2Options: { jsx: true })ï¼Œæ‰€ä»¥éœ€è¦åœ¨ vue.config.js ç¼–å†™ä¸‹ vite çš„é…ç½®å•¦(ç»ˆäºå¼€å§‹é…ç½® vite äº†)ï¼Œ<a href="https://github.com/IndexXuan/vue-cli-plugin-vite/issues/9" target="_blank" rel="noopener">ç›¸å…³ issue</a></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  pluginOptions: &#123;</span><br><span class="line">    vite: &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * Plugin[]</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@default </span>[]</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      plugins: [], <span class="comment">// other vite plugins list, will be merge into this plugin\'s underlying vite.config.ts</span></span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * Vite UserConfig.optimizeDeps options</span></span><br><span class="line"><span class="comment">       * recommended set `include` for speedup page-loaded time, e.g. include: ['vue', 'vue-router', '<span class="doctag">@scope</span>/xxx']</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@default <span class="type">&#123;&#125;</span></span></span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      optimizeDeps: &#123;&#125;,</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * type-checker, recommended disabled for large-scale old project.</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@default <span class="variable">false</span></span></span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      disabledTypeChecker: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * lint code by eslint</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@default <span class="variable">false</span></span></span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      disabledLint: <span class="literal">false</span>,</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * enable css-loader url resolve compat</span></span><br><span class="line"><span class="comment">       * disabled it if you do not use `~@/assets/logo.png` for better performance.</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@default <span class="variable">true</span></span></span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      cssLoaderCompat: <span class="literal">true</span>,</span><br><span class="line">      vitePluginVue2Options: &#123;</span><br><span class="line">        jsx: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>å†æ¬¡è¿è¡Œï¼Œå‘ç°å¯ä»¥æ‰“å¼€é¡µé¢äº†</p><blockquote><p>æ€»ç»“ï¼šåœ¨ vite ä¸­ä½¿ç”¨ jsx è¿˜æ˜¯ç¨å¾®æœ‰ç‚¹éº»çƒ¦çš„ï¼Œä¸€æ˜¯ä½¿ç”¨åˆ° jsx è¯­æ³•çš„ js æ–‡ä»¶éƒ½å¿…é¡»æ”¹æˆä½¿ç”¨ jsx åç¼€åï¼ŒäºŒæ˜¯åœ¨ vue çš„ sfc ç»„ä»¶ä¸­è¿˜å¾—åŠ ä¸Š jsx æ ‡è¯†(ä»…ä»…å¼•å…¥ä¸€ä¸ª .jsx æ–‡ä»¶ ä¸éœ€è¦åŠ ä¸Š)</p></blockquote><h3 id="require-è¯­æ³•å¤„ç†"><a href="#require-è¯­æ³•å¤„ç†" class="headerlink" title="require è¯­æ³•å¤„ç†"></a>require è¯­æ³•å¤„ç†</h3><p>æŠŠ require çš„æ³¨é‡Šæ‰“å¼€ï¼Œå†æ¬¡è¿è¡Œï¼Œf12 æ‰“å¼€æ§åˆ¶å°ï¼Œå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon07.jpg" target="_blank" rel="noopener" data-fancybox="group" data-caption="vue2-vite-demo-icon07.jpg" class="fancybox"><img alt="vue2-vite-demo-icon07.jpg" title="vue2-vite-demo-icon07.jpg" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon07.jpg" class="lazyload"></a></p><p>å› ä¸º vite ä¸æ”¯æŒ require çš„ï¼Œé‚£ä¹ˆæ€ä¹ˆè§£å†³å‘¢ï¼Ÿè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨ vite æ’ä»¶äº†ã€‚</p><p>è¿™é‡Œè¯´è¯´æˆ‘æ˜¯æ€ä¹ˆæ‰¾è¿™äº›æ’ä»¶çš„å§ï¼Œé€šå¸¸ä¸çŸ¥é“æ€ä¹ˆåŠçš„æ—¶å€™ï¼Œå°±å» npm æœç´¢ä¸€ä¸‹å…³é”®å­— vite commonjsï¼Œç„¶åçœ‹ä¸‹è¿™äº›æ’ä»¶çš„ä¸‹è½½é‡ï¼Œç‡å…ˆé€‰æ‹©æœ€é«˜çš„é‚£ä¸ªä½¿ç”¨ï¼Œè¿™é‡Œå‘ç° <a href="https://www.npmjs.com/package/@originjs/vite-plugin-commonjs" target="_blank" rel="noopener">@originjs/vite-plugin-commonjs</a> è¿™ä¸ªå‘¨ä¸‹è½½é‡æœ‰ 2000+ã€‚æ‰€ä»¥è¿™é‡Œå°±å°è¯•ä½¿ç”¨è¿™ä¸ªäº†ï¼Œå‘ç°ä¸€è¯•è¿˜çœŸæˆäº†ã€‚</p><p>æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥å°±è·Ÿç€æˆ‘ä¸€èµ·å®‰è£…å¹¶ä¸”é…ç½®ä¸€ä¸‹å§ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install @originjs/vite-plugin-commonjs -D</span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; viteCommonjs &#125; = <span class="built_in">require</span>(<span class="string">"@originjs/vite-plugin-commonjs"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  pluginOptions: &#123;</span><br><span class="line">    vite: &#123;</span><br><span class="line">      plugins: [</span><br><span class="line">        viteCommonjs(&#123;</span><br><span class="line">          <span class="comment">// lodashä¸éœ€è¦è¿›è¡Œè½¬æ¢</span></span><br><span class="line">          exclude: [<span class="string">"lodash"</span>],</span><br><span class="line">        &#125;),</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: ä½†æ˜¯æ ‡ç­¾ä¸Šçš„ require å¹¶ä¸æ”¯æŒï¼Œæ‰€ä»¥å»ºè®®å…¨é¢æ‹¥æŠ± ES Module</p></blockquote><blockquote><p>ps: è·¯ç”±ä½¿ç”¨ <code>resolve =&gt; require([&#39;../components/views/Home.vue&#39;], resolve)</code> å¯¼å…¥çš„ï¼Œå¯ä»¥é€šè¿‡ vscode ä½¿ç”¨ä¸‹é¢çš„æ­£åˆ™å…¨å±€æ›¿æ¢<br><br>æœç´¢ï¼š<code>\(?resolve\)?\s*=&gt;\s*require\(\[(.\*)\], resolve\)</code><br><br>æ›¿æ¢ï¼š<code>() =&gt; import($1)</code></p></blockquote><h3 id="scss-å˜é‡æ³¨å…¥"><a href="#scss-å˜é‡æ³¨å…¥" class="headerlink" title="scss å˜é‡æ³¨å…¥"></a>scss å˜é‡æ³¨å…¥</h3><p>é‡æ–°è¿è¡Œä¸€ä¸‹ï¼Œå‘ç°å•¥é—®é¢˜éƒ½æ²¡æœ‰ï¼Œçœ‹ç€ä¸€åˆ‡æ­£å¸¸ï¼Œè¿™æ—¶å€™æˆ‘è§‰å¾— HelloWorld ç»„ä»¶ç¼ºç‚¹æ ·å¼ï¼Œæˆ‘æƒ³ç¾åŒ–ä¸€æ ·ï¼Œæ¯”å¦‚ä¿®æ”¹ä¸‹å­—ä½“é¢œè‰²ã€æ–‡å­—å¤§å°å•¥çš„ã€‚</p><p>æ‰€ä»¥æˆ‘å¯¹ HelloWorld ç»„ä»¶æ·»åŠ äº†æ ·å¼ï¼Œè¿›è¡Œäº†å¦‚ä¸‹ä¿®æ”¹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"h1"</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test-jsx</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"jsx"</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Test <span class="keyword">from</span> <span class="string">"./Test"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">"HelloWorld"</span>,</span></span><br><span class="line">    components: &#123;</span><br><span class="line">      Test,</span><br><span class="line">      TestJsx: &#123;</span><br><span class="line">        render() &#123;</span><br><span class="line"><span class="javascript">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>æˆ‘æ˜¯vueæ–‡ä»¶çš„JSXæ¸²æŸ“çš„<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    props: &#123;</span><br><span class="line"><span class="javascript">      msg: <span class="built_in">String</span>,</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"scss"</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.h1</span> &#123;</span></span><br><span class="line">    font-size: 30px;</span><br><span class="line">    color: skyblue;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.hello</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="keyword">@include</span> bgCover(<span class="string">"@/assets/logo.png"</span>);</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>è¿˜æ²¡å¼€å§‹å†™å‘¢ï¼Œæ§åˆ¶å°å°±ä¸€å †æŠ¥é”™ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon08.jpg" target="_blank" rel="noopener" data-fancybox="group" data-caption="vue2-vite-demo-icon08.jpg" class="fancybox"><img alt="vue2-vite-demo-icon08.jpg" title="vue2-vite-demo-icon08.jpg" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2021-09-05/vue2-vite-demo-icon08.jpg" class="lazyload"></a></p><p>çŒœæµ‹æ˜¯ä½¿ç”¨äº†åˆ«åå¯¼å…¥ scss åï¼Œè¯†åˆ«åˆ° url() åå°±ä¼šè¾“å‡ºç›¸å¯¹è·¯å¾„ï¼Œæ‰€ä»¥è¿™è¾¹åœ¨ vite ç¯å¢ƒæ—¶å€™ï¼Œä½¿ç”¨ src/styles å¯¼å…¥å³å¯ï¼Œå…·ä½“ vue.config.js ä¿®æ”¹å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// npm æ­£åœ¨æ‰§è¡Œå“ªä¸ª script,npm_lifecycle_event å°±è¿”å›å½“å‰æ­£åœ¨è¿è¡Œçš„è„šæœ¬åç§°ã€‚</span></span><br><span class="line"><span class="keyword">const</span> isVite = process.env.npm_lifecycle_event.startsWith(<span class="string">"vite"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¼å®¹vite</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAdditionalData</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isVite) &#123;</span><br><span class="line">    <span class="keyword">return</span> str.replace(<span class="regexp">/@style\//</span>, <span class="string">"src/styles/"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  css: &#123;</span><br><span class="line">    requireModuleExtension: <span class="literal">true</span>,</span><br><span class="line">    loaderOptions: &#123;</span><br><span class="line">      scss: &#123;</span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼šåœ¨ sass-loader v7 ä¸­ï¼Œè¿™ä¸ªé€‰é¡¹åæ˜¯ "data" å®˜ç½‘æ–‡æ¡£è¿˜æ˜¯prependData   æ­¤é¡¹ç›®ç”¨çš„7+ç‰ˆæœ¬</span></span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼šåœ¨ sass-loader v10 ä½¿ç”¨ additionalDataï¼Œè¿™é‡Œä¸ºäº†å…¼å®¹viteï¼Œæ‰€ä»¥å‡çº§äº†sass-loader@10</span></span><br><span class="line">        additionalData: getAdditionalData(<span class="string">`@import '@style/variables.scss';`</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: è¿™é‡Œä¹Ÿæœ‰ä¸ªå°çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ npm_lifecycle_event æ¥è·å–æˆ‘ä»¬æ‰§è¡Œäº†çš„è„šæœ¬åç§°ï¼Œé€šè¿‡ npm_lifecycle_script è·å–æ‰§è¡Œäº†ä»€ä¹ˆå‘½ä»¤</p></blockquote><h3 id="script-æŒ‡å®šç¯å¢ƒ"><a href="#script-æŒ‡å®šç¯å¢ƒ" class="headerlink" title="script æŒ‡å®šç¯å¢ƒ"></a>script æŒ‡å®šç¯å¢ƒ</h3><p>é€šå¸¸æˆ‘ä»¬ä¼šæœ‰ betaã€preã€dev å¥½å‡ ä¸ªç¯å¢ƒï¼Œåœ¨ vue-cli å¼€å‘çš„æ—¶å€™æˆ‘ä»¬é€šè¿‡ä¼šé€šè¿‡ <code>--mode env</code> æŒ‡å®šæˆ‘ä»¬æœ¬åœ°çš„å¼€å‘ç¯å¢ƒï¼Œç°åœ¨æˆ‘ä»¬ä¹Ÿå°è¯•åœ¨ scripts ä¸­çš„ vite æŒ‡å®š staging ç¯å¢ƒï¼Œå‘ç°å¹¶æ²¡æœ‰æ•ˆæœï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"vite"</span>: <span class="string">"node ./bin/vite --mode staging"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ‰“å¼€ bin/vite æ–‡ä»¶ä¸€çœ‹ï¼Œå‘ç° ä½¿ç”¨ cross-spawn æ‰§è¡Œè„šæœ¬çš„ï¼Œæ‰€ä»¥ <code>--mode staging</code> è¿™ä¸ªå‚æ•°æ ¹æœ¬å°±æ²¡æœ‰è·å–ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆå¯ä»¥è·å–å‘¢ï¼Ÿ</p><p>å…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡ process.argv è·å–æˆ‘ä»¬æ‰§è¡Œçš„å‘½ä»¤çš„å‚æ•°ï¼Œæ‰“å°ä¸€ä¸‹å‘ç° argv æ˜¯ä¸ªæ•°ç»„ï¼Œè€Œæˆ‘ä»¬éœ€è¦çš„æ˜¯æœ€åé‚£ä¸¤ä¸ªï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹(<code>bin/vite</code>)ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">const</span> spawn = <span class="built_in">require</span>(<span class="string">"cross-spawn"</span>);</span><br><span class="line"><span class="keyword">const</span> configPath = <span class="built_in">require</span>.resolve(<span class="string">"vue-cli-plugin-vite/config/index.ts"</span>);</span><br><span class="line"><span class="keyword">const</span> cwd = path.resolve(__dirname, <span class="string">"../"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> params = [</span><br><span class="line">  <span class="string">`<span class="subst">$&#123;process.env.BUILD ? <span class="string">"build"</span> : <span class="string">""</span>&#125;</span>`</span>,</span><br><span class="line">  process.env.VITE_DEBUG ? <span class="string">"--debug"</span> : <span class="string">""</span>,</span><br><span class="line">  <span class="string">"--config"</span>,</span><br><span class="line">  <span class="string">`<span class="subst">$&#123;configPath&#125;</span>`</span>,</span><br><span class="line">  ...process.argv.slice(<span class="number">2</span>),</span><br><span class="line">].filter(<span class="built_in">Boolean</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`running: vite <span class="subst">$&#123;params.join(<span class="string">" "</span>)&#125;</span>`</span>);</span><br><span class="line"><span class="keyword">const</span> serveService = spawn(<span class="string">"vite"</span>, params, &#123;</span><br><span class="line">  cwd,</span><br><span class="line">  stdio: <span class="string">"inherit"</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">serveService.on(<span class="string">"close"</span>, (code) =&gt; &#123;</span><br><span class="line">  process.exit(code);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ vite å‘½ä»¤ä¹Ÿå¯ä»¥æŒ‡å®šå¼€å‘ç¯å¢ƒå•¦ ğŸ˜‰</p><h1 id="é¢å¤–çŸ¥è¯†ç‚¹-keep-alive-ä½¿ç”¨åŠ¨æ€-key-æ—¶ï¼Œçƒ­æ›´æ–°æ— æ•ˆ"><a href="#é¢å¤–çŸ¥è¯†ç‚¹-keep-alive-ä½¿ç”¨åŠ¨æ€-key-æ—¶ï¼Œçƒ­æ›´æ–°æ— æ•ˆ" class="headerlink" title="é¢å¤–çŸ¥è¯†ç‚¹ - keep-alive ä½¿ç”¨åŠ¨æ€ key æ—¶ï¼Œçƒ­æ›´æ–°æ— æ•ˆ"></a>é¢å¤–çŸ¥è¯†ç‚¹ - keep-alive ä½¿ç”¨åŠ¨æ€ key æ—¶ï¼Œçƒ­æ›´æ–°æ— æ•ˆ</h1><p>ä¸€èˆ¬çš„åå°ç®¡ç†è‚¯å®šéœ€è¦ keep-alive è¿™ä¸ªç»„ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬ layout ç»„ä»¶ä¸Šå°±æ˜¯ç”¨äº† keep-aliveï¼Œä½†æ˜¯ä½ ä¼šå‘ç°åœ¨ä½ ä½¿ç”¨ keep-alive çš„æ—¶å€™ï¼Œé¡µé¢å´æ²¡æœ‰çƒ­æ›´æ–°ï¼Œè¿™ä¸ªä¸æ˜¯ vite çš„é—®é¢˜ï¼Œä¹Ÿä¸æ˜¯ webpack çš„é—®é¢˜ï¼Œè¿™æ˜¯ Vue çš„é—®é¢˜(å½“ç„¶ä¹Ÿæœ‰<a href="https://github.com/vuejs/vue/pull/12092" target="_blank" rel="noopener">ç›¸å…³ issue</a>)ï¼Œè€Œä¸”è¿™ä¸ª issue å·²ç»ä» 18 å¹´å°±å¼€å§‹æœ‰äº†ï¼Œä¸”ç°åœ¨ä»ç„¶æ˜¯ open çŠ¶æ€(<a href="https://github.com/vuejs/vue-loader/issues/1332" target="_blank" rel="noopener">ç›¸å…³ issue</a>)</p><p>å‚è€ƒè¯„è®ºå’Œ issueï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™ä¸€ä¸ªåªåœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨çš„ keep-alive ç»„ä»¶äº†ã€‚</p><p>åˆ›å»º plugins/keep-alive.js æ–‡ä»¶ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; isArray, isRegExp &#125; <span class="keyword">from</span> <span class="string">"lodash"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params">arr, item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (arr.length) &#123;</span><br><span class="line">    <span class="keyword">var</span> index = arr.indexOf(item);</span><br><span class="line">    <span class="keyword">if</span> (index &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> arr.splice(index, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isDef</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v !== <span class="literal">undefined</span> &amp;&amp; v !== <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isAsyncPlaceholder</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> node.isComment &amp;&amp; node.asyncFactory;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFirstComponentChild</span>(<span class="params">children</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isArray(children)) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; children.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> c = children[i];</span><br><span class="line">      <span class="keyword">if</span> (isDef(c) &amp;&amp; (isDef(c.componentOptions) || isAsyncPlaceholder(c))) &#123;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getComponentName</span>(<span class="params">opts</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> opts &amp;&amp; (opts.Ctor.options.name || opts.tag);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">matches</span>(<span class="params">pattern</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isArray(pattern)) &#123;</span><br><span class="line">    <span class="keyword">return</span> pattern.indexOf(name) &gt; <span class="number">-1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> pattern === <span class="string">"string"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> pattern.split(<span class="string">","</span>).indexOf(name) &gt; <span class="number">-1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isRegExp(pattern)) &#123;</span><br><span class="line">    <span class="keyword">return</span> pattern.test(name);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* istanbul ignore next */</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pruneCache</span>(<span class="params">keepAliveInstance, filter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; cache, keys, _vnode &#125; = keepAliveInstance;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> cache) &#123;</span><br><span class="line">    <span class="keyword">const</span> entry = cache[key];</span><br><span class="line">    <span class="keyword">if</span> (entry) &#123;</span><br><span class="line">      <span class="keyword">const</span> name = entry.name;</span><br><span class="line">      <span class="keyword">if</span> (name &amp;&amp; !filter(name)) &#123;</span><br><span class="line">        pruneCacheEntry(cache, key, keys, _vnode);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pruneCacheEntry</span>(<span class="params">cache, key, keys, current</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> entry = cache[key];</span><br><span class="line">  <span class="keyword">if</span> (entry &amp;&amp; (!current || entry.tag !== current.tag)) &#123;</span><br><span class="line">    entry.componentInstance.$destroy();</span><br><span class="line">  &#125;</span><br><span class="line">  cache[key] = <span class="literal">null</span>;</span><br><span class="line">  remove(keys, key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  install(app) &#123;</span><br><span class="line">    <span class="comment">//åªåœ¨å¼€å‘æ¨¡å¼ä¸‹ç”Ÿæ•ˆ</span></span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">"development"</span>) &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * Remove an item from an array.</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> patternTypes = [<span class="built_in">String</span>, <span class="built_in">RegExp</span>, <span class="built_in">Array</span>];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> KeepAlive = &#123;</span><br><span class="line">        name: <span class="string">"keep-alive"</span>,</span><br><span class="line">        abstract: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">        props: &#123;</span><br><span class="line">          include: patternTypes,</span><br><span class="line">          exclude: patternTypes,</span><br><span class="line">          max: [<span class="built_in">String</span>, <span class="built_in">Number</span>],</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        methods: &#123;</span><br><span class="line">          cacheVNode() &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; cache, keys, vnodeToCache, keyToCache &#125; = <span class="keyword">this</span>;</span><br><span class="line">            <span class="keyword">if</span> (vnodeToCache) &#123;</span><br><span class="line">              <span class="keyword">const</span> &#123; tag, componentInstance, componentOptions &#125; = vnodeToCache;</span><br><span class="line">              cache[keyToCache] = &#123;</span><br><span class="line">                name: getComponentName(componentOptions),</span><br><span class="line">                tag,</span><br><span class="line">                componentInstance,</span><br><span class="line">                cid: vnodeToCache.cid,</span><br><span class="line">              &#125;;</span><br><span class="line">              keys.push(keyToCache);</span><br><span class="line">              <span class="comment">// prune oldest entry</span></span><br><span class="line">              <span class="keyword">if</span> (<span class="keyword">this</span>.max &amp;&amp; keys.length &gt; <span class="built_in">parseInt</span>(<span class="keyword">this</span>.max)) &#123;</span><br><span class="line">                pruneCacheEntry(cache, keys[<span class="number">0</span>], keys, <span class="keyword">this</span>._vnode);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">this</span>.vnodeToCache = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        created() &#123;</span><br><span class="line">          <span class="keyword">this</span>.cache = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">          <span class="keyword">this</span>.keys = [];</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        destroyed() &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> <span class="keyword">this</span>.cache) &#123;</span><br><span class="line">            pruneCacheEntry(<span class="keyword">this</span>.cache, key, <span class="keyword">this</span>.keys);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        mounted() &#123;</span><br><span class="line">          <span class="keyword">this</span>.cacheVNode();</span><br><span class="line">          <span class="keyword">this</span>.$watch(<span class="string">"include"</span>, (val) =&gt; &#123;</span><br><span class="line">            pruneCache(<span class="keyword">this</span>, (name) =&gt; matches(val, name));</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">this</span>.$watch(<span class="string">"exclude"</span>, (val) =&gt; &#123;</span><br><span class="line">            pruneCache(<span class="keyword">this</span>, (name) =&gt; !matches(val, name));</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        updated() &#123;</span><br><span class="line">          <span class="keyword">this</span>.cacheVNode();</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">          <span class="keyword">const</span> slot = <span class="keyword">this</span>.$slots.default;</span><br><span class="line">          <span class="keyword">const</span> vnode = getFirstComponentChild(slot);</span><br><span class="line">          <span class="keyword">const</span> componentOptions = vnode &amp;&amp; vnode.componentOptions;</span><br><span class="line">          <span class="keyword">if</span> (componentOptions) &#123;</span><br><span class="line">            vnode.cid = componentOptions.Ctor.cid;</span><br><span class="line">            <span class="comment">// check pattern</span></span><br><span class="line">            <span class="keyword">const</span> name = getComponentName(componentOptions);</span><br><span class="line">            <span class="keyword">const</span> &#123; include, exclude &#125; = <span class="keyword">this</span>;</span><br><span class="line">            <span class="keyword">if</span> (</span><br><span class="line">              <span class="comment">// not included</span></span><br><span class="line">              (include &amp;&amp; (!name || !matches(include, name))) ||</span><br><span class="line">              <span class="comment">// excluded</span></span><br><span class="line">              (exclude &amp;&amp; name &amp;&amp; matches(exclude, name))</span><br><span class="line">            ) &#123;</span><br><span class="line">              <span class="keyword">return</span> vnode;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">const</span> &#123; cache, keys &#125; = <span class="keyword">this</span>;</span><br><span class="line">            <span class="keyword">const</span> key =</span><br><span class="line">              vnode.key == <span class="literal">null</span></span><br><span class="line">                ? <span class="comment">// same constructor may get registered as different local components</span></span><br><span class="line">                  <span class="comment">// so cid alone is not enough (#3269)</span></span><br><span class="line">                  componentOptions.Ctor.cid +</span><br><span class="line">                  (componentOptions.tag ? <span class="string">`::<span class="subst">$&#123;componentOptions.tag&#125;</span>`</span> : <span class="string">""</span>)</span><br><span class="line">                : vnode.key;</span><br><span class="line">            <span class="keyword">if</span> (cache[key]) &#123;</span><br><span class="line">              <span class="keyword">if</span> (vnode.cid === cache[key].cid) &#123;</span><br><span class="line">                vnode.componentInstance = cache[key].componentInstance;</span><br><span class="line">                <span class="comment">// make current key freshest</span></span><br><span class="line">                remove(keys, key);</span><br><span class="line">                keys.push(key);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                cache[key].componentInstance.$destroy();</span><br><span class="line">                cache[key] = vnode;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">// delay setting the cache until update</span></span><br><span class="line">              <span class="keyword">this</span>.vnodeToCache = vnode;</span><br><span class="line">              <span class="keyword">this</span>.keyToCache = key;</span><br><span class="line">            &#125;</span><br><span class="line">            vnode.data.keepAlive = <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> vnode || (slot &amp;&amp; slot[<span class="number">0</span>]);</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      app.component(<span class="string">"keep-alive"</span>, KeepAlive);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>åœ¨ main.js å¼•å…¥ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> KeepAlive <span class="keyword">from</span> <span class="string">"./plugins/keep-alive"</span>;</span><br><span class="line">Vue.use(KeepAlive);</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å­ï¼Œæˆ‘ä»¬çš„ keep-alive å°±å…·æœ‰çƒ­æ›´æ–°åŠŸèƒ½å•¦ãƒ¾(â‰§â–½â‰¦*)</p><h1 id="æœªè§£å†³çš„é—®é¢˜"><a href="#æœªè§£å†³çš„é—®é¢˜" class="headerlink" title="æœªè§£å†³çš„é—®é¢˜"></a>æœªè§£å†³çš„é—®é¢˜</h1><ul><li><p>å«æœ‰ jsx æ ‡è¯†çš„ vue æ–‡ä»¶çƒ­æ›´æ–°å¤±æ•ˆï¼Œ.jsx æ–‡ä»¶æœ‰æ•ˆï¼Œ<a href="https://github.com/vitejs/vite/issues/1486" target="_blank" rel="noopener">ç›¸å…³ issue</a></p><ul><li>ä½†æ˜¯æœ‰<a href="https://github.com/vitejs/vite/pull/4563" target="_blank" rel="noopener">ç›¸å…³ pr</a>å®ç°äº† jsx in sfc çš„çƒ­æ›´æ–°ï¼Œä½†æ˜¯æˆ‘åœ¨ vue2 ä¸­ä½¿ç”¨å¹¶æœªçƒ­æ›´æ–°</li></ul></li></ul><blockquote><p>ps: vue-cli-plugin-vite æ’ä»¶ä¸­çš„ vite æ˜¯é”å®š <a href="mailto:vite@2.5.1">vite@2.5.1</a> ç‰ˆæœ¬çš„<a href="https://github.com/IndexXuan/vue-cli-plugin-vite/issues/46" target="_blank" rel="noopener">ç›¸å…³ issue</a>ï¼Œè€Œè¿™ä¸ª issue çš„ <a href="https://github.com/vitejs/vite/pull/4563" target="_blank" rel="noopener">ç›¸å…³ pr</a> æ˜¯ 2.5.3 ç‰ˆæœ¬æ‰ mergeï¼Œä¸è¿‡æˆ‘å°è¯•ä½¿ç”¨ <a href="mailto:vite@2.5.3">vite@2.5.3</a> ä¹Ÿæ²¡æœ‰æˆåŠŸ</p></blockquote><blockquote><p>ps: çœ‹äº†ä¸‹æºä»£ç ï¼Œ<a href="https://github.com/vitejs/vite" target="_blank" rel="noopener">github</a>ä¸Šçš„æºç å·²ç» merge äº†ï¼Œä½†æ˜¯ npm ä¸Šéƒ¨åˆ†åŒ…ä»ç„¶æ²¡æœ‰å‘å¸ƒï¼Œæ¯”å¦‚<a href="https://www.npmjs.com/package/@vitejs/plugin-vue" target="_blank" rel="noopener">@vitejs/plugin-vue</a>ã€<a href="https://www.npmjs.com/package/@vitejs/plugin-vue-jsx" target="_blank" rel="noopener">@vitejs/plugin-vue-jsx</a>ï¼ŒçŒœæµ‹ä¸‹ä¸ªç‰ˆæœ¬åº”è¯¥å°±èƒ½å®ç° jsx in sfc çš„çƒ­æ›´æ–°äº† ğŸ˜ã€‚<br>ä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥å°† <a href="https://github.com/vitejs/vite/pull/4563" target="_blank" rel="noopener">pr</a> çš„æºç å¤åˆ¶åˆ° node_modules é‡Œä¹Ÿå¯æå‰ä½“éªŒ jsx in sfc çš„çƒ­æ›´æ–°ğŸ¤</p></blockquote><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è™½ç„¶- -è¿™é‡Œæ²¡æœ‰ç”¨å®é™…é¡¹ç›®å¯¹æ¯”ï¼Œä¹Ÿæ²¡æœ‰å®é™…çš„æ•°æ®å¯¹æ¯”ï¼Œä½†æ˜¯å¤§å®¶å¯ä»¥ download é‚£ä¸ªé…ç½®åœ¨è‡ªå·±é¡¹ç›®ä½“éªŒä¸€ä¸‹ï¼Œè¿ç§»èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚å¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿å¤§å®¶ç•™è¨€è¿›è¡Œäº¤æµ~~</p><p>æœ€åå†å¼ºè°ƒï¼Œåœ¨ vite ä¸­ä½¿ç”¨ jsx è¯­æ³•çš„è¯ï¼Œä¸€æ˜¯ä½¿ç”¨åˆ° jsx è¯­æ³•çš„ js æ–‡ä»¶éƒ½å¿…é¡»æ”¹æˆä½¿ç”¨ jsx åç¼€åï¼ŒäºŒæ˜¯åœ¨ vue çš„ sfc ç»„ä»¶ä¸­è¿˜å¾—åŠ ä¸Š jsx æ ‡è¯†(ä»…ä»…å¼•å…¥ä¸€ä¸ª .jsx æ–‡ä»¶ ä¸éœ€è¦åŠ ä¸Š)</p><p>ä»“åº“ä»£ç é“¾æ¥å¦‚ä¸‹ï¼š</p><ul><li><p><a href="https://gitee.com/gating/demo/tree/master/vite" target="_blank" rel="noopener">gitee åœ°å€</a></p><ul><li><p><a href="https://gitee.com/gating/demo/tree/master/vite/vue2-vite-demo-template" target="_blank" rel="noopener">vue2-vite-demo-template</a></p></li><li><p><a href="https://gitee.com/gating/demo/tree/master/vite/vue2-vite-demo" target="_blank" rel="noopener">vue2-vite-demo</a></p></li><li><p><a href="https://gitee.com/gating/demo/tree/master/vite/vue2-vite-demo-node10" target="_blank" rel="noopener">vue2-vite-demo-node10</a></p></li></ul></li><li><p><a href="https://github.com/GATING/demo/tree/master/vite" target="_blank" rel="noopener">github åœ°å€</a></p><ul><li><p><a href="https://github.com/GATING/demo/tree/master/vite/vue2-vite-demo-template" target="_blank" rel="noopener">vue2-vite-demo-template</a></p></li><li><p><a href="https://github.com/GATING/demo/tree/master/vite/vue2-vite-demo" target="_blank" rel="noopener">vue2-vite-demo</a></p></li><li><p><a href="https://github.com/GATING/demo/tree/master/vite/vue2-vite-demo-node10" target="_blank" rel="noopener">vue2-vite-demo-node10</a></p></li></ul></li></ul><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>è™½ç„¶æœ¬æ–‡ç½—å—¦äº†ç‚¹ï¼Œä½†è¿˜æ˜¯æ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„èƒ½çœ‹åˆ°æœ€å O(âˆ©_âˆ©)O å¸Œæœ›ä½ èƒ½æœ‰æ‰€æ”¶è· ğŸ˜</p></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">gating</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://gatings.cn/2021-09-05/vue2+vite%E5%88%9D%E4%BD%93%E9%AA%8C/">https://gatings.cn/2021-09-05/vue2+vite%E5%88%9D%E4%BD%93%E9%AA%8C/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://gatings.cn">ç£¨è¹­å…ˆç”Ÿ</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vite/">vite</a></div><div class="post_share"></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"><i class="fa fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/GATING/blog_imgs@master/blog/wechat.jpg" alt="å¾®ä¿¡"><div class="post-qr-code__desc">å¾®ä¿¡</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/GATING/blog_imgs@master/blog/alipay.jpg" alt="æ”¯ä»˜å®"><div class="post-qr-code__desc">æ”¯ä»˜å®</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2020-11-03/Vue+Antd%E6%90%AD%E9%85%8D%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E5%AE%9E%E7%8E%B0%E6%90%9C%E7%B4%A2%E5%AE%9A%E4%BD%8D%E7%AD%89%E5%8A%9F%E8%83%BD/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror='onerror=null,src="/img/404.jpg"'><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info"><span>Vue+Antdæ­é…ç™¾åº¦åœ°å›¾å®ç°æœç´¢å®šä½ç­‰åŠŸèƒ½</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div id="lv-container" data-id="city" data-uid="MTAyMC8zNTA5MC8xMTYyNQ=="><script>!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&((n=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script></div></div></div></main><footer id="footer" style="background-image:url(https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2021 By gating</div><div class="footer_custom_text">ç”±<b>&nbsp;ç£¨è¹­&nbsp;</b>å€¾åŠ›æ‰“é€ &nbsp;|&nbsp;<b>å¥³ç‹å¤§äºº</b>&nbsp;-&nbsp;çƒ­æƒ…èµåŠ©</div><div class="icp"><a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"><span>ç²¤ICPå¤‡17035705å·</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments"></i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/click_heart.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« "></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49b1f5">hexo-generator-search</a> <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>